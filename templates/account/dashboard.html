{% extends "partials/dashboard-base.html" %}
{% load static %}
{% load humanize %}

{% block content %}

    <!-- Dashboard Section start -->
    <section class="dashboard-section body-collapse">
        <div class="overlay pt-120">
            <div class="container-fruid">

                {% if form.errors %}
                <div class="alert alert-danger">
                    <strong>{{form.errors}}</strong>
                </div>
                {% endif %}

                <div class="row">
                    <div class="col-xl-8 col-lg-7">
                        <div class="section-content">
                            <div class="acc-details">
                                <div class="top-area">
                                    <div class="left-side">
                                        <h5>Hi, {{account.user.kyc.full_name|title}}</h5>
                                        <h2>â‚¹{{account.account_balance|intcomma}}</h2>
                                        
                                    </div>
                                    <div class="right-side">
                                        <div class="right-top">
                                            <select>
                                                <option value="1">Indian Rupees</option>
                                                <option value="2">Euro</option>
                                                <option value="3">US Dollar</option>
                                            </select>
                                            <div class="dropdown-area">
                                                <button type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                                                    <img src="{% static 'assets1/images/icon/option.png' %}" alt="icon">
                                                </button>
                                                <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                                                    <li><a class="dropdown-item" href="#">Fiat Currency</a></li>
                                                    <li><a class="dropdown-item" href="#">crypto Currency</a></li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="right-bottom">
                                            <h4></h4>
                                            <h5></h5>
                                        </div>
                                    </div>
                                </div>
                                <div class="bottom-area">
                                    <div class="left-side">
                                        <a href="{% url "core:search-account" %}" class="cmn-btn">Transfer Money</a>
                                        <a href="deposit-money.html" class="cmn-btn">Add Money</a>
                                        <a href="withdraw-money-step-1.html" class="cmn-btn">Withdraw</a>
                                    </div>
                                    <div class="right-side">
                                        <div class="dropdown-area">
                                            <button type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                                                <img src="{% static 'assets1/images/icon/option.png' %}" alt="icon">
                                            </button>
                                            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                                                <li><a class="dropdown-item" href="recipients.html">Recipients</a></li>
                                                <li><a class="dropdown-item" href="receive-step-1.html">Request Money</a></li>
                                                <li><a class="dropdown-item" href="pay-step-1.html">Send Money</a></li>
                                                <li><a class="dropdown-item" href="pay-step-1.html">Bill Pay</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="transactions-area mt-40">
                                <div class="section-text">
                                    <h5>Transactions</h5>
                                    <p>Updated every several minutes</p>
                                </div>
                                <div class="top-area d-flex align-items-center justify-content-between">
                                    <ul class="nav nav-tabs" role="tablist">
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link active" id="latest-tab" data-bs-toggle="tab" data-bs-target="#latest" type="button" role="tab" aria-controls="latest" aria-selected="true">Latest</button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link" id="upcoming-tab" data-bs-toggle="tab" data-bs-target="#upcoming" type="button" role="tab" aria-controls="upcoming" aria-selected="false">Upcoming</button>
                                        </li>
                                    </ul>
                                    <div class="view-all d-flex align-items-center">
                                        <a href="javascript:void(0)">View All</a>
                                        <img src="{% static 'assets1/images/icon/right-arrow.png' %}" alt="icon">
                                    </div>
                                </div>
                                <div class="tab-content mt-40">
                                    <div class="tab-pane fade show active" id="latest" role="tabpanel" aria-labelledby="latest-tab">
                                        <div class="table-responsive">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th scope="col">Name/ Business</th>
                                                        <th scope="col">Date</th>
                                                        <th scope="col">Status</th>
                                                        <th scope="col">Amount</th>
                                                    </tr>
                                                </thead>
                                                <tbody>

                                                    <tr data-bs-toggle="modal" data-bs-target="#transactionsMod">
                                                        <th scope="row">
                                                            <p>Bangkok Bank</p>
                                                            <p class="mdr">Withdraw to bank account</p>
                                                        </th>
                                                        <td>
                                                            <p>03:00 PM</p>
                                                            <p class="mdr">10 Mar 2022</p>
                                                        </td>
                                                        <td>
                                                            <p class="inprogress">In Progress</p>
                                                        </td>
                                                        <td>
                                                            <p>-$520</p>
                                                            <p class="mdr">$3.0</p>
                                                        </td>
                                                    </tr>
                                                    <tr data-bs-toggle="modal" data-bs-target="#transactionsMod">
                                                        <th scope="row">
                                                            <p>Envato Pty Ltd</p>
                                                            <p class="mdr">Marketplace Payment Received</p>
                                                        </th>
                                                        <td>
                                                            <p>04:30 PM</p>
                                                            <p class="mdr">01 Mar 2022</p>
                                                        </td>
                                                        <td>
                                                            <p class="completed">Completed</p>
                                                        </td>
                                                        <td>
                                                            <p>+$450</p>
                                                            <p class="mdr">No Fees</p>
                                                        </td>
                                                    </tr>
                                                    <tr data-bs-toggle="modal" data-bs-target="#transactionsMod">
                                                        <th scope="row">
                                                            <p>Mailchimp</p>
                                                            <p class="mdr">Subscription Service Payment</p>
                                                        </th>
                                                        <td>
                                                            <p>01:15 PM</p>
                                                            <p class="mdr">25 Mar 2022</p>
                                                        </td>
                                                        <td>
                                                            <p class="completed">Completed</p>
                                                        </td>
                                                        <td>
                                                            <p>-$100</p>
                                                            <p class="mdr">No Fees</p>
                                                        </td>
                                                    </tr>
                                                    <tr data-bs-toggle="modal" data-bs-target="#transactionsMod">
                                                        <th scope="row">
                                                            <p>Facebook Ads</p>
                                                            <p class="mdr">Ads Service</p>
                                                        </th>
                                                        <td>
                                                            <p>07:05 PM</p>
                                                            <p class="mdr">15 Mar 2022</p>
                                                        </td>
                                                        <td>
                                                            <p class="pending">Pending</p>
                                                        </td>
                                                        <td>
                                                            <p>$200</p>
                                                            <p class="mdr">No Fees</p>
                                                        </td>
                                                    </tr>
                                                    <tr data-bs-toggle="modal" data-bs-target="#transactionsMod">
                                                        <th scope="row">
                                                            <p>Upwork Escow Inc</p>
                                                            <p class="mdr">Payment payment</p>
                                                        </th>
                                                        <td>
                                                            <p>04:02 PM</p>
                                                            <p class="mdr">10 Mar 2022</p>
                                                        </td>
                                                        <td>
                                                            <p class="completed">Completed</p>
                                                        </td>
                                                        <td>
                                                            <p>$450</p>
                                                            <p class="mdr">$.5</p>
                                                        </td>
                                                    </tr>
                                                    <tr data-bs-toggle="modal" data-bs-target="#transactionsMod">
                                                        <th scope="row">
                                                            <p>Ron Stewart</p>
                                                            <p class="mdr">Payment Refund</p>
                                                        </th>
                                                        <td>
                                                            <p>11:00 PM</p>
                                                            <p class="mdr">21 Mar 2022</p>
                                                        </td>
                                                        <td>
                                                            <p class="cancelled">Cancelled</p>
                                                        </td>
                                                        <td>
                                                            <p>+$450</p>
                                                            <p class="mdr">No Fees</p>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="upcoming" role="tabpanel" aria-labelledby="upcoming-tab">
                                        <div class="table-responsive">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th scope="col">Name/ Business</th>
                                                        <th scope="col">Date</th>
                                                        <th scope="col">Status</th>
                                                        <th scope="col">Amount</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr data-bs-toggle="modal" data-bs-target="#transactionsMod">
                                                        <th scope="row">
                                                            <p>Bangkok Bank</p>
                                                            <p class="mdr">Withdraw to bank account</p>
                                                        </th>
                                                        <td>
                                                            <p>03:00 PM</p>
                                                            <p class="mdr">10 Mar 2022</p>
                                                        </td>
                                                        <td>
                                                            <p class="inprogress">In Progress</p>
                                                        </td>
                                                        <td>
                                                            <p>-$520</p>
                                                            <p class="mdr">$3.0</p>
                                                        </td>
                                                    </tr>
                                                    <tr data-bs-toggle="modal" data-bs-target="#transactionsMod">
                                                        <th scope="row">
                                                            <p>Envato Pty Ltd</p>
                                                            <p class="mdr">Marketplace Payment Received</p>
                                                        </th>
                                                        <td>
                                                            <p>04:30 PM</p>
                                                            <p class="mdr">01 Mar 2022</p>
                                                        </td>
                                                        <td>
                                                            <p class="completed">Completed</p>
                                                        </td>
                                                        <td>
                                                            <p>+$450</p>
                                                            <p class="mdr">No Fees</p>
                                                        </td>
                                                    </tr>
                                                    <tr data-bs-toggle="modal" data-bs-target="#transactionsMod">
                                                        <th scope="row">
                                                            <p>Mailchimp</p>
                                                            <p class="mdr">Subscription Service Payment</p>
                                                        </th>
                                                        <td>
                                                            <p>01:15 PM</p>
                                                            <p class="mdr">25 Mar 2022</p>
                                                        </td>
                                                        <td>
                                                            <p class="completed">Completed</p>
                                                        </td>
                                                        <td>
                                                            <p>-$100</p>
                                                            <p class="mdr">No Fees</p>
                                                        </td>
                                                    </tr>
                                                    <tr data-bs-toggle="modal" data-bs-target="#transactionsMod">
                                                        <th scope="row">
                                                            <p>Facebook Ads</p>
                                                            <p class="mdr">Ads Service</p>
                                                        </th>
                                                        <td>
                                                            <p>07:05 PM</p>
                                                            <p class="mdr">15 Mar 2022</p>
                                                        </td>
                                                        <td>
                                                            <p class="pending">Pending</p>
                                                        </td>
                                                        <td>
                                                            <p>$200</p>
                                                            <p class="mdr">No Fees</p>
                                                        </td>
                                                    </tr>
                                                    <tr data-bs-toggle="modal" data-bs-target="#transactionsMod">
                                                        <th scope="row">
                                                            <p>Upwork Escow Inc</p>
                                                            <p class="mdr">Payment payment</p>
                                                        </th>
                                                        <td>
                                                            <p>04:02 PM</p>
                                                            <p class="mdr">10 Mar 2022</p>
                                                        </td>
                                                        <td>
                                                            <p class="completed">Completed</p>
                                                        </td>
                                                        <td>
                                                            <p>$450</p>
                                                            <p class="mdr">$.5</p>
                                                        </td>
                                                    </tr>
                                                    <tr data-bs-toggle="modal" data-bs-target="#transactionsMod">
                                                        <th scope="row">
                                                            <p>Ron Stewart</p>
                                                            <p class="mdr">Payment Refund</p>
                                                        </th>
                                                        <td>
                                                            <p>11:00 PM</p>
                                                            <p class="mdr">21 Mar 2022</p>
                                                        </td>
                                                        <td>
                                                            <p class="cancelled">Cancelled</p>
                                                        </td>
                                                        <td>
                                                            <p>+$450</p>
                                                            <p class="mdr">No Fees</p>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-4 col-lg-5">
                        <div class="side-items">
                            <div class="single-item">
                                <div class="section-text d-flex align-items-center justify-content-between">
                                    <h6>Linked Payment system</h6>
                                    <div class="right-side">
                                        <div class="dropdown-area">
                                            <button type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                                                <img src="{% static 'assets1/images/icon/option.png' %}" alt="icon">
                                            </button>                        
                                        </div>
                                    </div>
                                </div>
                                <div class="row">

                                    {% for card in credit_card %}
                                    <a href="{% url "core:card_detail" card.card_id %}">
                                        <div class="col-12">
                                            <div class="card__main">
                                                <div class="Front_card">
                                                    <div class="top_card">
                                                        <span class="visa">{{card.card_type}}</span>
                                                        <div class="logo">
                                                            <img src="https://upload.wikimedia.org/wikipedia/commons/2/23/Verve_Image.png"  class="logo" alt="logo" />
                                                        </div>
                                                    </div>
                                                    <div class="middle_card" style="margin-top: 35px;">
                                                        <span class="chip"></span>
                                                        <div class="card_number">{{card.number}}</div>
                                                    </div>
                                                    <div class="bottom_card">
                                                        <div class="card_info">
                                                            <div class="card_holder_name" style="text-align: left;">$100</div>
                                                            <div class="card_holder_name">{{card.name}}</div>
                                                        </div>
                                                        <div class="cardf_info">
                                                            <div class="card_dholder_info">
                                                                <span class="expire_month">{{card.month}}</span>
                                                                <span class="slash">/</span>
                                                                <span class="expire_year">{{card.year}}</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="back_card">
                                                    <div class="top_card">
                                                        <span class="black_strip"></span>
                                                        <div class="cvc_strip">
                                                            <span class="cvc_number">{{card.cvv}}</span>
                                                        </div>
                                                    </div>
                                                    <div class="bottom_card">
                                                        <div class="flex">
                                                            <span class="sticker"></span>
                                                            <div class="logo1">
                                                                <span></span>
                                                                <span></span>
                                                                <span></span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </a>
                                    {% endfor %}       

                                    <div class="col-6">
                                        <div class="single-card">
                                            <button type="button" class="reg w-100" data-bs-toggle="modal" data-bs-target="#addcardMod">
                                                <img src="{% static 'assets1/images/add-new.png' %}" alt="image" class="w-100">
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="single-item">
                                <div class="section-text d-flex align-items-center justify-content-between">
                                    <h6>Payment Analytics</h6>
                                    <div class="select-box">
                                        <select>
                                            <option>Monthly</option>
                                            <option value="1">Jan</option>
                                            <option value="2">Feb</option>
                                            <option value="3">Mar</option>
                                        </select>
                                    </div>
                                </div>
                                <div id="chart"></div>
                            </div>
                            <div class="single-item">
                                <div class="section-text d-flex align-items-center justify-content-between">
                                    <h6>Recipients</h6>
                                    <div class="view-all d-flex align-items-center">
                                        <a href="javascript:void(0)">View All</a>
                                        <img src="{% static 'assets1/images/icon/right-arrow.png' %}" alt="icon">
                                    </div>
                                </div>
                                <ul class="recipients-item">
                                    <li>
                                        <p class="left d-flex align-items-center">
                                            <img src="{% static 'assets1/images/recipients-1.png' %}" alt="icon">
                                            <span class="info">
                                                <span>Phil King</span>
                                            <span>08:00 AM â€” 19 August</span>
                                            </span>
                                        </p>
                                        <p class="right">
                                            <span> +$345</span>
                                            <span>Payment</span>
                                        </p>
                                    </li>
                                    <li>
                                        <p class="left d-flex align-items-center">
                                            <img src="{% static 'assets1/images/recipients-2.png' %}" alt="icon">
                                            <span class="info">
                                                <span>Debra Wilson</span>
                                            <span>08:00 AM â€” 19 August</span>
                                            </span>
                                        </p>
                                        <p class="right">
                                            <span class="loss">-$850</span>
                                            <span>Refund</span>
                                        </p>
                                    </li>
                                    <li>
                                        <p class="left d-flex align-items-center">
                                            <img src="{% static 'assets1/images/recipients-3.png' %}" alt="icon">
                                            <span class="info">
                                                <span>Philip Henry</span>
                                            <span>08:00 AM â€” 19 August</span>
                                            </span>
                                        </p>
                                        <p class="right">
                                            <span>+$2.050</span>
                                            <span>Payment</span>
                                        </p>
                                    </li>
                                    <li>
                                        <p class="left d-flex align-items-center">
                                            <img src="{% static 'assets1/images/recipients-4.png' %}" alt="icon">
                                            <span class="info">
                                                <span>Erin Garcia</span>
                                            <span>08:00 AM â€” 19 August</span>
                                            </span>
                                        </p>
                                        <p class="right">
                                            <span> +$900</span>
                                            <span>Payment</span>
                                        </p>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Dashboard Section end -->



    <!-- Add Card Popup start -->
    <div class="add-card">
        <div class="container-fruid">
            <div class="row">
                <div class="col-lg-6">
                    <div class="modal fade" id="addcardMod" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header justify-content-between">
                                    <h6>Add Card</h6>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"><i class="fa-solid fa-xmark"></i></button>
                                </div>
                                <form method="POST" action="{% url "account:dashboard" %}">
                                    {% csrf_token %}
                                    <div class="row justify-content-center">                                      
                                        <div class="col-md-12">
                                            <div class="single-input">
                                                <label for="cardNumber">Card Name</label>
                                                {{form.name}}
                                            </div>
                                        </div>

                                        <div class="col-md-12">
                                            <div class="single-input">
                                                <label for="cardNumber">Card Number</label>
                                                {{form.number}}
                                            </div>
                                        </div>


                                        <div class="col-md-6">
                                            <div class="single-input">
                                                <label for="cardNumber">Expiry Month</label>
                                                {{form.month}}
                                            </div>
                                        </div>

                                        <div class="col-md-6">
                                            <div class="single-input">
                                                <label for="cardNumber">Expiry Year</label>
                                                {{form.year}}
                                            </div>
                                        </div>

                                        <div class="col-md-6">
                                            <div class="single-input">
                                                <label for="cardNumber">CVV</label>
                                                {{form.cvv}}
                                            </div>
                                        </div>

                                        <div class="col-md-6">
                                            <div class="single-input">
                                                <label for="cardNumber">Card Type</label>
                                                {{form.card_type}}
                                            </div>
                                        </div>
                                        
                                        <div class="col-12">
                                            <div class="btn-border w-100">
                                                <button type="submit" class="cmn-btn w-100">Add Card</button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Add Card Popup start -->

{% endblock content %}